<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>html5文件读取及一些API | 李锋涛</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <link rel="manifest" href="/manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content=李锋涛   >
  <link rel="apple-touch-icon" href="img/icons/152.png">
  
  
  <meta name="theme-color" content="#0c0c1f">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <link rel="alternate" href="/atom.xml" title="李锋涛" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body class=" ">
  	   <div class="iewarn" id="iewarn">
<div>---------!!!!!!!!!!!!!!!!-----------------</div>
检测到您正在使用IE9或更低版本浏览器访问本站，为了您的阅读体验，本站推荐您使用<a href="https://www.google.com/chrome/" target="_blank" >Chrome浏览器</a> 或者<a href="https://www.mozilla.org/en-US/firefox/products/" target="_blank" >Firefox浏览器 </a> 对本站进行访问

</div>
      <header class="main-header">

<div class="logo nav-list">
<a href="/"><img src=/img/logo1.jpg alt="logo" width="50px" height="50px" /></a>
</div>
<ul class="nav-list nav">

<li class="nav-list">
<a href="/">
<i class="fa fa-home" aria-hidden="true" ></i>
首页
</a>
</li>
<li class="nav-list">
<a href="/about">
<i class="fa fa-youtube-play" aria-hidden="true" ></i>
关于我
</a>
</li>
<li class="nav-list">
<a href="/atom.xml" target="_blank" >
<i class="fa fa-feed" aria-hidden="true" ></i>
订阅我
</a>
</li>
<li class="nav-list lightmode ">
<a href="javascript:;" >
<i class="fa fa-moon-o" aria-hidden="true"></i>
关灯
</a>
</li>
</ul>

</header>
        <article>
  <div class="article-share">
<div id="qrcode">
	<div class="qr-text">
	扫一扫，分享到微信
	<i class="fa fa-window-close-o fa-2" aria-hidden="true"></i>
	</div>
</div>
<ul class="share-content">
<li >
		<i class="fa fa-share-alt" aria-hidden="true"></i>
	</li>
	<li>
		<a ><i class="fa fa-weixin" aria-hidden="true" id="toweixin"></i></a>
	</li>
	<li>
		<a ><i class="fa fa-weibo" aria-hidden="true" id="toweibo"></i></a>
	</li>
	<li>
		<a ><i class="fa fa-twitter" aria-hidden="true" id="totwitter"></i></a>
	</li>
</ul>
</div>
<div class="article main-body" itemscope itemprop="blogPost">
  <div class="article-meta">
    <!--采用相对的时间或者绝对的时间，默认相对-->

<div class="article-date">
  	<time datetime="2014-12-20T08:45:21.000Z" itemprop="datePublished">
  	
  	
  	
  	
  	
    
          
      
      
        
    
    
    
  	
  		
  	
  	
    
    
  	
  	 	
  	
  		
  	
  	
    
    
  	
  	
  	
  		
  	
  	
  	3yearsago


  
<div>
read time: 5分钟
</div>
</div>




  </div>
  <div class="article-inner">
   
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      html5文件读取及一些API
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="网络状态检测"><a href="#网络状态检测" class="headerlink" title="网络状态检测"></a>网络状态检测</h2><pre><code>我们可以通过window.onLine 来检测，用户当前的网络状况，返回一个布尔值。
1 window.online用户网络连接时被调用
 例：window.addEventListener(&apos;online&apos;,function(){
     alert(&apos;已经建立了网络链接&apos;)
     })
2  window.offline用户网络断开时被调用
例： window.addEventListener(&apos;offline&apos;,function(){
    alert(&apos;已经失去了网络链接&apos;)
    })
</code></pre><h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><pre><code>    通过FileReader对象我们可以读取本地存储的文件，可以使用 File 对象来指定所要读取的文件或数据。其中File对象可以是来自用户在一个 &lt;input&gt; 元素上选择文件后返回的FileList 对象，也可以来自由拖放操作生成的  DataTransfer
 1 FileList 对象
    由于HTML5中我们可以通过为表单元素添加multiple属性，因此我们通过&lt;input&gt;上传文件后得到的是一个FileList对象（伪数组形式）。
2 FileReader 对象
    HTML5新增内建对象(内置对象，内嵌对象)，可以读取本地文件内容。
</code></pre><h2 id="DataUrl"><a href="#DataUrl" class="headerlink" title="DataUrl"></a>DataUrl</h2><pre><code>1 readAsDataURL()
以DataURL形式读取文件
2 事件监听
onload 当文件读取完成时调用
3 属性
result 文件读取结果
    参考资料
    https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader#toc
</code></pre><h2 id="视频常用api"><a href="#视频常用api" class="headerlink" title="视频常用api"></a>视频常用api</h2><pre><code>方法：load() 加载， play() 播放， pause() 暂停
属性： currentTime 视频播放的当前进度
        duraton 视频的总时间
事件： oncanplay 事件在用户可以开始播放视频/音频（audio/video)时触发
    ontimeupdate : 通过该事件来报告当前播放进度
    onended: 播放完时触发
    video.webkitRequestFullScreen()  全屏
</code></pre><h2 id="全屏"><a href="#全屏" class="headerlink" title="全屏"></a>全屏</h2><pre><code>HTML5规范允许用户自定义网页上任一元素全屏显示。
requestFullscreen() 开启全屏显示
cancleFullscreen() 关闭全屏显示
</code></pre><h2 id="不同浏览器需要添加前缀如"><a href="#不同浏览器需要添加前缀如" class="headerlink" title="不同浏览器需要添加前缀如"></a>不同浏览器需要添加前缀如</h2><pre><code>webkitRequestFullscreen, mozrequestFullScreen
webkitCancleFullScreen、mozCancleFullScreen
通过document.fullscreen 检测当前是否处于全屏
全屏伪类
    :full-screen .box {}、:-webkit-full-screen {}、:moz-full-screen {}
</code></pre><h2 id="拖拽-draggable"><a href="#拖拽-draggable" class="headerlink" title="拖拽  draggable"></a>拖拽  draggable</h2><pre><code>在HTML5的规范中，我们可以通过为元素增加draggable=&quot;true&quot;来设置此元素是否可以进行拖拽操作，其中图片、链接默认是开启的。
1 拖拽元素
    页面设置了draggable=&apos;true&apos;属性的元素
2 目标元素
    页面中任何一个元素都可以成为目标元素
3 事件监听
    拖拽元素
    ondrag 应用于拖拽元素，整个拖拽过程都会调用
    ondragstart 应用于拖拽元素，当拖拽开始时调用
    ondragleave 应用于拖拽元素，当鼠标离开拖拽元素时调用
    ondragend 应用于拖拽元素，当拖拽结束时调用
    目标元素
    ondragenter 应用于目标元素，当拖拽元素进入时调用
    onderagover 应用于目标元素，当停留在目标元素上时调用
    ondrop 应用于目标元素，当在目标元素上松开鼠标时调用
    ondragleave 应用于目标元素，当鼠标离开目标元素时调用
</code></pre><h2 id="WEB-存储"><a href="#WEB-存储" class="headerlink" title="WEB 存储"></a>WEB 存储</h2><pre><code>随着互联网的快速发展，基于网页的应用越来越普遍，同时也变的越来越复杂，为了满足各种各样的需求，会经常性在本地存储大量的数据，传统方式我们以document.cookie来进行存储的，但是由于其存储大小只有4k左右，并且解析也相当的复杂，给开发带来诸多不便，HTML5规范则提出解决方案。
storage 存储
window.sessionStorage  
session 会话声明周期和localstorage 不一样，存储时间比较短
window.localStorage     local本地
(向本地保存数据,有可能在浏览器内存里面，有可能在硬盘上面.)
</code></pre><h2 id="storage特性"><a href="#storage特性" class="headerlink" title="storage特性"></a>storage特性</h2><pre><code>1 设置，读取方便
2 容量大 sessionStorage约5M、localStorage约20M
3 只能存储字符串，可以讲对象JSON.stringify()编码厚存储
</code></pre><h2 id="window-sessionStorage和window-localStorage区别"><a href="#window-sessionStorage和window-localStorage区别" class="headerlink" title="window.sessionStorage和window.localStorage区别"></a>window.sessionStorage和window.localStorage区别</h2><pre><code>window.sessionStorage
1 声明周期为关闭浏览器窗口
2 在同一个窗口下数据可以共享
window.localStorage
1 拥挤生效。除非手动删除
2 可以多窗口共享
</code></pre><h2 id="方法详解"><a href="#方法详解" class="headerlink" title="方法详解"></a>方法详解</h2><pre><code>setltem(key,value) 设置存储内容
getltem(key) 读取存储内容
removeltem(key) 删除键值为key的存储内容
clear() 清空所有存储内容
key(n) 以索引值来获取存储内容
</code></pre><h2 id="应用缓存-离线存储"><a href="#应用缓存-离线存储" class="headerlink" title="应用缓存 离线存储"></a>应用缓存 离线存储</h2><pre><code>HTML5中我们可以轻松的构建一个离线（无网络状态）应用，只需要创建一个cache manifest文件。
1 优势
- 可以配置 需要缓存的资源
- 网络无链接应用仍课用
- 本地读取缓存资源，提升访问熟读，增强用户体验
- 减少请求，环节服务器负担
</code></pre><h2 id="缓存清单"><a href="#缓存清单" class="headerlink" title="缓存清单"></a>缓存清单</h2><pre><code>一个普通文本文件，其中列出了浏览器应缓存以供离线访问的资源，推荐使用.appcache为后缀名，添加MIME类型
AddType text/cache-manifest .appcache
例如我们创建了一个名为demo.appcache的文件，然后在需要应用缓存在页面的根元素(html)添加属性manifest=&quot;demo.appcache&quot;，路径要保证正确。
</code></pre><h2 id="manifest-文件格式"><a href="#manifest-文件格式" class="headerlink" title="manifest 文件格式"></a>manifest 文件格式</h2><pre><code>1、顶行写CACHE MANIFEST
2、CACHE: 换行 指定我们需要缓存的静态资源，如.css、image、js等
3、NETWORK: 换行 指定需要在线访问的资源，可使用通配符
4、FALLBACK: 当前页面无法访问时退回的页面(回退;  后退)
 换行 当被缓存的文件找不到时的备用资源 可自行查阅资料
</code></pre>
      
    </div>
    
<div class="reward" id="rewardme">
「喜欢，就赞一个呗！(:3 」∠)_ (￣y▽￣)~*」

<div class="reward-qr">
<div class="reward-tks">
「鼓励我写出更好的文字」
<i class="fa fa-window-close" aria-hidden="true"></i>
</div>
<img src= "/img/456.jpg" />
「支付宝」
</div>


<div class="reward-btn" >
<div class="reward-text">赏</div>
</div>


</div>
 
    
    




<div class="copyright">
<blockquote>
<strong>本文链接</strong>:  <a href= "http:lilyfengtao.github.io/2014/12/20/html5文件读取及一些API/" href="_blank" > http:lilyfengtao.github.io/2014/12/20/html5文件读取及一些API/ </a>
<div>
<strong>版权声明</strong>:本博客所有文章除特别声明外，均采用<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" >CC BY-NC-SA 3.0 CN许可协议</a>进行许可。转载请注明出处！
</div>
</blockquote>
</div>

	

    
    <div class="cat-and-tags">
    
    <div class="show-tags">
<ul>



<li>



<a href=http:lilyfengtao.github.io/tags/html5 >
<i class="fa fa-tags" aria-hidden="true"></i>
html5
</a>
</li>


</ul>
</div>


    </div>
    
    <!--注意网易云跟贴url位置必须在网易网站配置中的网站域名之下，比如当我在localhost下设置的时候哦
就会因为与网易网站设置的域名不匹配而导致跟贴不能显示出来
-->


<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>

var pathname=document.location.pathname
var cloudTieConfig = {
  url: "http:lilyfengtao.github.io"+pathname, 
  sourceId: "uuuu",
  productKey: "d9ac976925074859942b446f585903fd",
  target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>

  </div>
 
 
  <!--上一篇下一篇 -->
  
    
<nav id="article-nav">
  
    <a href="/2014/12/18/H5新增表单/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          H5新增表单
        
      </div>
    </a>
  
  
    <a href="/2014/12/24/关于html5的一些面试题/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">关于html5的一些面试题</div>
    </a>
  
</nav>

  

</div>
</article>

      <footer id="footer">
  <div class="outer">
     
     <div id="footer-info" class="inner">
     
      &copy;  2014 - 2017 
       李锋涛<br>

      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
      </br>
      theme <a href="http://github.com/zhangolve/olive">olive</a> by zhangolve
      </div>
      
      
     


     
    
  </div>
  <div class="to-top">
    <div class="toTop-btn">
    <div class="toTop-text">返回顶部</div>
  	<button class="toTop-button">
  		<i class="fa fa-arrow-up" aria-hidden="true"></i>
  	</button >
    </div>
  </div>
</footer>
     
    
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'http://www.lifengtao.cn/', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<script src="/js/qrcode.js"></script>
<script src="/js/script.js"></script>
<script src="/js/lightmode.js"></script>

<script src="/js/iewarn.js"></script>


  
</body>
</html>